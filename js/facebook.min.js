function statusChangeCallback(e){console.log("statusChangeCallback"),console.log(e),"connected"===e.status?fetchUser("id,name,first_name,last_name,email,gender,picture.width(200).height(200)",e.authResponse.accessToken):"not_authorized"===e.status}function checkLoginState(){FB.getLoginStatus(function(e){statusChangeCallback(e)})}function fetchUser(e,t){FB.api("/me",{fields:e},function(e){var n='{"email":"'+e.email+'","firstName":"'+e.first_name+'","lastName":"'+e.last_name+'","gender":"'+e.gender+'","imagePath":"'+e.picture.data.url+'","socialMediaId":1}';$.ajax({url:"resources/handler/socialLogin.php",data:{socialMedia:1,objUser:n,access_token:t},type:"POST",dataType:"json"}).done(function(e){if(""!=e)if(e.hasOwnProperty("afterAction")){var t=new Function(e.afterAction);t()}else location.href=e.redirectPage}).fail(function(e){console.log(e)})})}window.fbAsyncInit=function(){FB.init({appId:facebook_api,cookie:!0,xfbml:!0,version:"v2.5"}),FB.getLoginStatus(function(e){statusChangeCallback(e)})},function(e,t,n){var a,o=e.getElementsByTagName(t)[0];e.getElementById(n)||(a=e.createElement(t),a.id=n,a.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk"),$("#fb-login").click(function(){FB.login(function(){checkLoginState()},{scope:"email,public_profile",return_scopes:!0})});